---
title: "Covid19_Data_Analysis"
date: "2024-10-10"
output: pdf_document
---

```{r setup, include=TRUE}
knitr::opts_chunk$set(echo = TRUE)
warning = FALSE
library(tidyverse)
library(lubridate)

urls <- c("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/refs/heads/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv", "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/refs/heads/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv", "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/refs/heads/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv", "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/refs/heads/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv")

global_cases <- read_csv(urls[1])
global_deaths <- read_csv(urls[2])
US_cases <- read_csv(urls[3])
US_deaths <- read_csv(urls[4])
head(global_cases)
head(global_deaths)
```

```{R Tidy Global Data, error= TRUE}
tidy_global_cases <- global_cases %>%
  pivot_longer(
    cols = -c("Province/State", "Country/Region", "Lat", "Long"),  
    names_to = "Date", 
    values_to = "Cases") %>%
    select(-c("Lat", "Long"))

tidy_global_deaths <- global_deaths %>%
  pivot_longer(
    cols = -c("Province/State", "Country/Region", "Lat", "Long"),
    names_to = "Date",
    values_to = "Deaths") %>%
    select(-c("Lat", "Long"))

tidy_global_cases <- tidy_global_cases %>%
  mutate(Date = as.Date(Date, format = "%m/%d/%y"))

tidy_global_deaths <- tidy_global_deaths %>%
  mutate(Date = as.Date(Date, format = "%m/%d/%y"))

# Now join the two datasets on Province/State, Country/Region, and Date
global_combined <- full_join(tidy_global_cases, tidy_global_deaths, 
                             by = c("Province/State", "Country/Region", "Date"))
global_combined
tail(global_combined)


```


```{R tidy US data 2}
tidy_US_cases <- US_cases %>%
  pivot_longer(
    cols = -c("Province_State", "Country_Region", "Lat", "Long_"),  
    names_to = "Date", 
    values_to = "Cases") %>%
    select(-c("Lat", "Long_", ))

tidy_US_deaths <- US_deaths %>%
  pivot_longer(
    cols = -c("Province_State", "Country_Region", "Lat", "Long_"),
    names_to = "Date",
    values_to = "Deaths") %>%
    select(-c("Lat", "Long_"))

tidy_US_cases <- tidy_global_cases %>%
  mutate(Date = as.Date(Date, format = "%m/%d/%y"))

tidy_US_deaths <- tidy_global_deaths %>%
  mutate(Date = as.Date(Date, format = "%m/%d/%y"))

# Now join the two datasets on Province/State, Country/Region, and Date
US_combined <- full_join(tidy_global_cases, tidy_global_deaths, 
                             by = c("Province_State", "Country_Region", "Date"))
US_combined

```


